define ("block_mootivated/cart",["core/ajax","core/notification","core/str"],function(a,b,c){var d=c.get_strings,e=function(a){this.cart=a||{maxquantity:0,total:0,lines:[]};this.add=this.add.bind(this);this.addFromNode=this.addFromNode.bind(this);this.getQuantity=this.getQuantity.bind(this)};e.prototype.add=function(c,e,f,g){var h=this;return a.call([{methodname:"block_mootivated_add_to_cart",args:{id:c,name:e,cost:f,imageurl:g}}],!1,!0)[0].then(function(a){h.cart=a;return a}).catch(function(a){if("shoppingcartfull"===a.errorcode){var c=d([{key:"cartfull",component:"block_mootivated"},{key:"shoppingcartfull",component:"block_mootivated",param:{maxtotalquantity:h.cart.maxquantity}},{key:"ok",component:"core"}]);c.then(function(a){b.alert(a[0],a[1],a[2])}).catch(b.exception)}else{b.exception(a)}})};e.prototype.addFromNode=function(a){var b=a.data("item-id"),c=a.data("item-name"),d=parseInt(a.data("item-cost"),10),e=a.data("item-thumbnailurl");return this.add(b,c,d,e)};e.prototype.getQuantity=function(a){var b=this.cart.lines;if(a){b=b.filter(function(b){return b.itemid==a})}return b.reduce(function(a,b){return a+b.quantity},0)};return e});
//# sourceMappingURL=cart.min.js.map
